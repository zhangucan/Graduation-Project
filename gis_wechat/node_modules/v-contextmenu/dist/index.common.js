Object.defineProperty(exports,"__esModule",{value:!0});var directive={bind:function(e,t,n){var i=n.context.$refs[t.arg];Array.isArray(i.$refs.references)?i.$refs.references.push({el:e,vnode:n}):i.$refs.references=[{el:e,vnode:n}],i.$contextmenuId=e.id||i._uid}};function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Contextmenu={render:function(){var e=this.$createElement;return(this._self._c||e)("ul",{directives:[{name:"show",rawName:"v-show",value:this.visible,expression:"visible"}],ref:"contextmenu",class:this.contextmenuCls,style:this.style},[this._t("default")],2)},staticRenderFns:[],name:"VContextmenu",provide:function(){return{$$contextmenu:this}},props:{eventType:{type:String,default:"contextmenu"},theme:{type:String,default:"default"},autoPlacement:{type:Boolean,default:!0}},data:function(){return{visible:!1,style:{top:0,left:0}}},computed:{clickOutsideHandler:function(){return this.visible?this.hide:function(){}},isClick:function(){return"click"===this.eventType},contextmenuCls:function(){return["v-contextmenu","v-contextmenu--"+this.theme]}},watch:{visible:function(e){e?(this.$emit("show",this),document.body.addEventListener("click",this.handleBodyClick)):(this.$emit("hide",this),document.body.removeEventListener("click",this.handleBodyClick))}},mounted:function(){var e=this;document.body.appendChild(this.$el),window.$$VContextmenu?window.$$VContextmenu[this.$contextmenuId]=this:window.$$VContextmenu=_defineProperty({},this.$contextmenuId,this),this.$refs.references&&this.$refs.references.forEach(function(t){t.el.addEventListener(e.eventType,e.handleReferenceContextmenu)})},beforeDestroy:function(){var e=this;document.body.removeChild(this.$el),delete window.$$VContextmenu[this.$contextmenuId],this.$refs.references&&this.$refs.references.forEach(function(t){t.el.removeEventListener(e.eventType,e.handleReferenceContextmenu)}),document.body.removeEventListener("click",this.handleBodyClick)},methods:{handleReferenceContextmenu:function(e){var t=this;e.preventDefault();var n=this.$refs.references.find(function(t){return t.el.contains(e.target)});this.$emit("contextmenu",n?n.vnode:null);var i=e.pageX,o=e.pageY;this.show(),this.$nextTick(function(){var e={top:o,left:i};if(t.autoPlacement){var n=t.$refs.contextmenu.clientWidth,s=t.$refs.contextmenu.clientHeight;s+o>=window.innerHeight&&(e.top-=s),n+i>=window.innerWidth&&(e.left-=n)}t.style={top:e.top+"px",left:e.left+"px"}})},handleBodyClick:function(e){this.$el.contains(e.target)||this.isClick&&this.$refs.references.some(function(t){return t.el.contains(e.target)})||(this.visible=!1)},show:function(e){var t=this;Object.keys(window.$$VContextmenu).forEach(function(e){e!==t.$contextmenuId&&window.$$VContextmenu[e].hide()}),e&&(this.style={top:e.top+"px",left:e.left+"px"}),this.visible=!0},hide:function(){this.visible=!1},hideAll:function(){Object.keys(window.$$VContextmenu).forEach(function(e){window.$$VContextmenu[e].hide()})}}},ContextmenuItem={render:function(){var e=this.$createElement,t=this._self._c||e;return this.divider?t("li",{staticClass:"v-contextmenu-divider"}):t("li",{class:this.classname,on:{click:this.handleClick,mouseenter:this.handleMouseenter,mouseleave:this.handleMouseleave}},[this._t("default")],2)},staticRenderFns:[],name:"VContextmenuItem",inject:["$$contextmenu"],props:{divider:Boolean,disabled:Boolean,autoHide:{type:Boolean,default:!0}},data:function(){return{hover:!1}},computed:{classname:function(){return{"v-contextmenu-item":!this.divider,"v-contextmenu-item--hover":this.hover,"v-contextmenu-item--disabled":this.disabled}}},methods:{handleMouseenter:function(e){this.disabled||(this.hover=!0,this.$emit("mouseenter",this,e))},handleMouseleave:function(e){this.disabled||(this.hover=!1,this.$emit("mouseleave",this,e))},handleClick:function(e){this.disabled||(this.$emit("click",this,e),this.autoHide&&this.$$contextmenu.hide())}}};function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var ContextmenuSubmenu={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("li",{class:e.classname,on:{mouseenter:e.handleMouseenter,mouseleave:e.handleMouseleave}},[n("span",{staticClass:"v-contextmenu-submenu__title"},[e._t("title",[e._v(e._s(e.title))]),e._v(" "),n("span",{staticClass:"v-contextmenu-iconfont v-contextmenu-submenu__icon"})],2),e._v(" "),n("ul",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}],ref:"submenu",class:e.submenuCls},[e._t("default")],2)])},staticRenderFns:[],name:"VContextmenuSubmenu",props:{title:String,disabled:Boolean},data:function(){return{hover:!1,submenuPlacement:[]}},computed:{classname:function(){return{"v-contextmenu-item":!0,"v-contextmenu-submenu":!0,"v-contextmenu-item--hover":this.hover,"v-contextmenu-item--disabled":this.disabled}},submenuCls:function(){return["v-contextmenu"].concat(_toConsumableArray(this.submenuPlacement))}},methods:{handleMouseenter:function(e){var t=this;if(!this.disabled){var n=e.target.getBoundingClientRect();this.hover=!0,this.$emit("mouseenter",this,e),this.$nextTick(function(){var e=t.$refs.submenu.clientWidth,i=t.$refs.submenu.clientHeight,o=[];n.right+e>=window.innerWidth?o.push("left"):o.push("right"),n.bottom+i>=window.innerHeight?o.push("bottom"):o.push("top"),t.submenuPlacement=o})}},handleMouseleave:function(e){this.disabled||(this.hover=!1,this.$emit("mouseleave",this,e))}}},ContextmenuGroup={render:function(){var e=this.$createElement,t=this._self._c||e;return t("li",{staticClass:"v-contextmenu-group"},[t("ul",{staticClass:"v-contextmenu-group__menus",style:this.menusStyle},[this._t("default")],2)])},staticRenderFns:[],name:"VContextmenuGroup",props:{maxWidth:[Number,String]},computed:{menusStyle:function(){return this.maxWidth?{"max-width":"number"==typeof this.maxWidth?this.maxWidth+"px":this.maxWidth,"overflow-x":"auto"}:null}}},index={install:function(e){e.directive("contextmenu",directive),e.component(Contextmenu.name,Contextmenu),e.component(ContextmenuItem.name,ContextmenuItem),e.component(ContextmenuSubmenu.name,ContextmenuSubmenu),e.component(ContextmenuGroup.name,ContextmenuGroup)}};exports.directive=directive,exports.Contextmenu=Contextmenu,exports.ContextmenuItem=ContextmenuItem,exports.ContextmenuSubmenu=ContextmenuSubmenu,exports.ContextmenuGroup=ContextmenuGroup,exports.default=index;
